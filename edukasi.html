<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Skin Analyze</title>
    <!-- Bootstrap CSS & Icons -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet" />

    <style type="text/css">
        @media (max-width: 767px) {
            .navbar-collapse {
                background-color: #fff4d1;
                padding: 10px;
                margin-top: 10px;
                border-radius: 5px;
            }
            #searchInput {
                font-size: 14px;
            }
            .card-hover h5 {
                font-size: 13px;
            }
        }
    </style>
</head>
    <body style="margin: 0; font-family: Arial, sans-serif; background-color: #ffffff;">
        <!-- Navbar -->
        <nav class="navbar navbar-expand-lg" style="background-color: #fff4d1; position: sticky; top: 0; z-index: 1000; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
            <div class="container-fluid">
                <!-- Logo and Brand Name -->
                <div class="d-flex align-items-center gap-2">
                    <img src="images/LOGO ITEM.png" alt="Logo 1" class="img-fluid" style="height: 45px; width: 45px; object-fit: contain;" />
                    <span style="font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; font-size: 1.25rem; font-weight: 600; color: #333; letter-spacing: 0.5px; text-transform: uppercase;">
                        Skin Analyze
                    </span>
                </div>

                <!-- Toggle Button -->
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"
                    aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <!-- Navigation Links -->
                <div class="collapse navbar-collapse justify-content-end" id="navbarNav">
                    <ul class="navbar-nav gap-2">
                        <li class="nav-item">
                            <a class="nav-link text-dark" href="index.html" 
                            style="padding: 8px 16px; border-radius: 4px; transition: background-color 0.3s ease;"
                            onmouseover="this.style.backgroundColor='rgba(0,0,0,0.1)'" 
                            onmouseout="this.style.backgroundColor='transparent'"
                            onclick="setActive(this)">Beranda</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link text-dark" href="edukasi.html" 
                            style="padding: 8px 16px; border-radius: 4px; transition: background-color 0.3s ease;"
                            onmouseover="this.style.backgroundColor='rgba(0,0,0,0.1)'" 
                            onmouseout="this.style.backgroundColor='transparent'"
                            onclick="setActive(this)">Edukasi</a>
                        </li>
                    </ul>
                </div>
            </div>
        </nav>
    <!-- Search Bar -->
    <div class="container-fluid py-3" style="background-color: #f8f9fa; position: sticky; top: 56px; z-index: 999; box-shadow: 0 2px 4px rgba(0,0,0,0.05);">
        <div class="row justify-content-center">
            <div class="col-md-8 col-lg-6">
                <div class="input-group" style="box-shadow: 0 1px 3px rgba(0,0,0,0.1);">
                    <input type="text" id="searchInput" class="form-control" placeholder="pencarian..." 
                        style="border-radius: 20px 0 0 20px; border: 1px solid #ced4da; border-right: none; padding: 8px 15px;">
                    <button class="btn" type="button" id="searchButton" 
                            style="border-radius: 0 20px 20px 0; border: 1px solid #ced4da; border-left: none; 
                                background-color: #ffffff; padding: 0 15px; color: #495057;">
                        <i class="bi bi-search"></i>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Main Content -->
    <div class="container-fluid" style="padding: 20px;">
        <!-- Grid Layout -->
        <div id="contentGrid" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 20px; padding: 20px 0;">
            <!-- YouTube Card 1 -->
            <div class="video-card" data-title="Cara Mudah Mengetahui Jenis Kulit WAJIB Sebelum Memulai Skincare" data-channel="Skincare by Jessi">
                <a href="https://youtu.be/WwxoWrHymeY?si=HEW8ATs-A5KMJq-x" target="_blank" style="text-decoration: none; color: inherit;">
                    <div class="card-hover" style="border-radius: 10px; overflow: hidden; box-shadow: 0 2px 8px rgba(0,0,0,0.1); transition: transform 0.3s, box-shadow 0.3s;">
                        <div style="position: relative; height: 0; padding-bottom: 56.25%; background-color: #f0f0f0;">
                            <img src="images/edukasi.png" alt="Skincare Routine" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; object-fit: cover;">
                            <div style="position: absolute; bottom: 5px; right: 5px; background-color: rgba(0,0,0,0.7); color: white; padding: 2px 5px; border-radius: 3px; font-size: 12px;">5:09</div>
                        </div>
                        <div style="padding: 12px;">
                            <div style="display: flex; gap: 10px;">
                                <div style="min-width: 36px; height: 36px; border-radius: 50%; background-color: #ddd; overflow: hidden;">
                                    <img src="images/pict.PNG" alt="Channel" style="width: 100%; height: 100%; object-fit: cover;">
                                </div>
                                <div>
                                    <h5 style="margin: 0; font-size: 14px; font-weight: 600; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden; line-clamp: 2;">Cara Mudah Mengetahui Jenis Kulit 💕 WAJIB Sebelum Memulai Skincare!</h5>
                                    <p style="margin: 4px 0 0; font-size: 12px; color: #606060;">Skincare by Jessi</p>
                                    <p style="margin: 2px 0 0; font-size: 12px; color: #606060;">145 rb views • 4 tahun yang lalu</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </a>
            </div>

            <!-- YouTube Card 2 -->
            <div class="video-card" data-title="BEBAS KEBOTAKAN, JERAWAT & Penyakit Kulit Lain Setelah Nonton Ini" data-channel="SUARA BERKELAS">
                <a href="https://youtu.be/InWkoT0bnLc?si=lGE_uxp0dMFx_nXb" target="_blank" style="text-decoration: none; color: inherit;">
                    <div class="card-hover" style="border-radius: 10px; overflow: hidden; box-shadow: 0 2px 8px rgba(0,0,0,0.1); transition: transform 0.3s, box-shadow 0.3s;">
                        <div style="position: relative; height: 0; padding-bottom: 56.25%; background-color: #f0f0f0;">
                            <img src="images/edukasi1.PNG" alt="Acne Treatment" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; object-fit: cover;">
                            <div style="position: absolute; bottom: 5px; right: 5px; background-color: rgba(0,0,0,0.7); color: white; padding: 2px 5px; border-radius: 3px; font-size: 12px;">59:25</div>
                        </div>
                        <div style="padding: 12px;">
                            <div style="display: flex; gap: 10px;">
                                <div style="min-width: 36px; height: 36px; border-radius: 50%; background-color: #ddd; overflow: hidden;">
                                    <img src="images/pict1.PNG" alt="Channel" style="width: 100%; height: 100%; object-fit: cover;">
                                </div>
                                <div>
                                    <h5 style="margin: 0; font-size: 14px; font-weight: 600; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden; line-clamp: 2;">BEBAS KEBOTAKAN, JERAWAT & Penyakit Kulit Lain Setelah Nonton Ini! | SUARA BERKELAS #51</h5>
                                    <p style="margin: 4px 0 0; font-size: 12px; color: #606060;">SUARA BERKELAS</p>
                                    <p style="margin: 2px 0 0; font-size: 12px; color: #606060;">187 rb views • 1 bulan yang lalu</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </a>
            </div>

            <!-- YouTube Card 3 -->
            <div class="video-card" data-title="OOTD & Tutorial Hijab Kampus" data-channel="Yay! Mutiara">
                <a href="https://youtu.be/TrEmwD53u2g?si=HfiGlWPjX-8Dt2oY" target="_blank" style="text-decoration: none; color: inherit;">
                    <div class="card-hover" style="border-radius: 10px; overflow: hidden; box-shadow: 0 2px 8px rgba(0,0,0,0.1); transition: transform 0.3s, box-shadow 0.3s;">
                        <div style="position: relative; height: 0; padding-bottom: 56.25%; background-color: #f0f0f0;">
                            <img src="images/edukasi2.PNG" alt="Anti-Aging" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; object-fit: cover;">
                            <div style="position: absolute; bottom: 5px; right: 5px; background-color: rgba(0,0,0,0.7); color: white; padding: 2px 5px; border-radius: 3px; font-size: 12px;">13:41</div>
                        </div>
                        <div style="padding: 12px;">
                            <div style="display: flex; gap: 10px;">
                                <div style="min-width: 36px; height: 36px; border-radius: 50%; background-color: #ddd; overflow: hidden;">
                                    <img src="images/pict2.PNG" alt="Channel" style="width: 100%; height: 100%; object-fit: cover;">
                                </div>
                                <div>
                                    <h5 style="margin: 0; font-size: 14px; font-weight: 600; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden; line-clamp: 2;">OOTD & Tutorial Hijab Kampus | Back to college/campus</h5>
                                    <p style="margin: 4px 0 0; font-size: 12px; color: #606060;">Yay! Mutiara</p>
                                    <p style="margin: 2px 0 0; font-size: 12px; color: #606060;">62 rb views • 2 tahun yang lalu</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </a>
            </div>

            <!-- YouTube Card 4 -->
            <div class="video-card" data-title="TUTORIAL HIJAB PASHMINA KEKINIAN UNTUK PEMULA" data-channel="Wanda Hanan Rahayu">
                <a href="https://youtu.be/h_aPwYNEbt4?si=Pi1QAPbMDBMiIauY" target="_blank" style="text-decoration: none; color: inherit;">
                    <div class="card-hover" style="border-radius: 10px; overflow: hidden; box-shadow: 0 2px 8px rgba(0,0,0,0.1); transition: transform 0.3s, box-shadow 0.3s;">
                        <div style="position: relative; height: 0; padding-bottom: 56.25%; background-color: #f0f0f0;">
                            <img src="images/edukasi3.PNG" alt="Sunscreen" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; object-fit: cover;">
                            <div style="position: absolute; bottom: 5px; right: 5px; background-color: rgba(0,0,0,0.7); color: white; padding: 2px 5px; border-radius: 3px; font-size: 12px;">12:31</div>
                        </div>
                        <div style="padding: 12px;">
                            <div style="display: flex; gap: 10px;">
                                <div style="min-width: 36px; height: 36px; border-radius: 50%; background-color: #ddd; overflow: hidden;">
                                    <img src="images/pict3.PNG" alt="Channel" style="width: 100%; height: 100%; object-fit: cover;">
                                </div>
                                <div>
                                    <h5 style="margin: 0; font-size: 14px; font-weight: 600; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden; line-clamp: 2;">TUTORIAL HIJAB PASHMINA KEKINIAN UNTUK PEMULA MUDAH DAN GA RIBET!!! || BY ONEDA</h5>
                                    <p style="margin: 4px 0 0; font-size: 12px; color: #606060;">Wanda Hanan Rahayu</p>
                                    <p style="margin: 2px 0 0; font-size: 12px; color: #606060;">7.8 jt views • 3 tahun yang lalu</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </a>
            </div>

            <!-- YouTube Card 5 -->
            <div class="video-card" data-title="Belajar Ingredients Skincare" data-channel="C&F Store Official">
                <a href="https://youtu.be/B3Rv12es6KE?si=iSiEmECqv-uW-zvg" target="_blank" style="text-decoration: none; color: inherit;">
                    <div class="card-hover" style="border-radius: 10px; overflow: hidden; box-shadow: 0 2px 8px rgba(0,0,0,0.1); transition: transform 0.3s, box-shadow 0.3s;">
                        <div style="position: relative; height: 0; padding-bottom: 56.25%; background-color: #f0f0f0;">
                            <img src="images/edukasi4.PNG" alt="Natural Remedies" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; object-fit: cover;">
                            <div style="position: absolute; bottom: 5px; right: 5px; background-color: rgba(0,0,0,0.7); color: white; padding: 2px 5px; border-radius: 3px; font-size: 12px;">19:51</div>
                        </div>
                        <div style="padding: 12px;">
                            <div style="display: flex; gap: 10px;">
                                <div style="min-width: 36px; height: 36px; border-radius: 50%; background-color: #ddd; overflow: hidden;">
                                    <img src="images/pict4.PNG" alt="Channel" style="width: 100%; height: 100%; object-fit: cover;">
                                </div>
                                <div>
                                    <h5 style="margin: 0; font-size: 14px; font-weight: 600; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden; line-clamp: 2;">Belajar Ingredients Skincare by C&F Store Official</h5>
                                    <p style="margin: 4px 0 0; font-size: 12px; color: #606060;">C&F Store Official</p>
                                    <p style="margin: 2px 0 0; font-size: 12px; color: #606060;">17 rb views • 3 tahun yang lalu</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </a>
            </div>

            <!-- YouTube Card 6 -->
            <div class="video-card" data-title="SKINCARE BERLEBIHAN BIKIN KULIT TIPIS" data-channel="kasisolusi">
                <a href="https://youtu.be/1astIz_B-j4?si=A7fFvq04L3EOtBEX" target="_blank" style="text-decoration: none; color: inherit;">
                    <div class="card-hover" style="border-radius: 10px; overflow: hidden; box-shadow: 0 2px 8px rgba(0,0,0,0.1); transition: transform 0.3s, box-shadow 0.3s;">
                        <div style="position: relative; height: 0; padding-bottom: 56.25%; background-color: #f0f0f0;">
                            <img src="images/edukasi5.PNG" alt="Night Routine" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; object-fit: cover;">
                            <div style="position: absolute; bottom: 5px; right: 5px; background-color: rgba(0,0,0,0.7); color: white; padding: 2px 5px; border-radius: 3px; font-size: 12px;">1:08:03</div>
                        </div>
                        <div style="padding: 12px;">
                            <div style="display: flex; gap: 10px;">
                                <div style="min-width: 36px; height: 36px; border-radius: 50%; background-color: #ddd; overflow: hidden;">
                                    <img src="images/pict5.PNG" alt="Channel" style="width: 100%; height: 100%; object-fit: cover;">
                                </div>
                                <div>
                                    <h5 style="margin: 0; font-size: 14px; font-weight: 600; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden; line-clamp: 2;">SKINCARE BERLEBIHAN BIKIN KULIT TIPIS⁉️😱 TERNYATA SKINCARE INI YANG HARUS DIHINDARI!</h5>
                                    <p style="margin: 4px 0 0; font-size: 12px; color: #606060;">kasisolusi</p>
                                    <p style="margin: 2px 0 0; font-size: 12px; color: #606060;">75 rb views • 4 minggu yang lalu</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </a>
            </div>

            <!-- YouTube Card 7 -->
            <div class="video-card" data-title="OOTD HIJAB REMAJA KOREAN STYLE DENGAN ROK" data-channel="Lovely OOTD_Remaja">
                <a href="https://youtu.be/6LkvkhjrqhI?si=WDI5L1IOpvb3VFmU" target="_blank" style="text-decoration: none; color: inherit;">
                    <div class="card-hover" style="border-radius: 10px; overflow: hidden; box-shadow: 0 2px 8px rgba(0,0,0,0.1); transition: transform 0.3s, box-shadow 0.3s;">
                        <div style="position: relative; height: 0; padding-bottom: 56.25%; background-color: #f0f0f0;">
                            <img src="images/edukasi6.PNG" alt="Night Routine" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; object-fit: cover;">
                            <div style="position: absolute; bottom: 5px; right: 5px; background-color: rgba(0,0,0,0.7); color: white; padding: 2px 5px; border-radius: 3px; font-size: 12px;">1:04</div>
                        </div>
                        <div style="padding: 12px;">
                            <div style="display: flex; gap: 10px;">
                                <div style="min-width: 36px; height: 36px; border-radius: 50%; background-color: #ddd; overflow: hidden;">
                                    <img src="images/pict6.PNG" alt="Channel" style="width: 100%; height: 100%; object-fit: cover;">
                                </div>
                                <div>
                                    <h5 style="margin: 0; font-size: 14px; font-weight: 600; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden; line-clamp: 2;">OOTD HIJAB REMAJA KOREAN STYLE DENGAN ROK | OOTD HIJAB REMAJA</h5>
                                    <p style="margin: 4px 0 0; font-size: 12px; color: #606060;">Lovely OOTD_Remaja</p>
                                    <p style="margin: 2px 0 0; font-size: 12px; color: #606060;">121 rb views • 2 tahun yang lalu</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </a>
            </div>

            <!-- YouTube Card 8 -->
            <div class="video-card" data-title="Tutorial makeup wisuda natural pakai product affordable murah untuk pemula" data-channel="Paohilda makeup artist">
                <a href="https://youtu.be/SMbvOrTMnHI?si=gfCSh0z4V9uSk1Pr" target="_blank" style="text-decoration: none; color: inherit;">
                    <div class="card-hover" style="border-radius: 10px; overflow: hidden; box-shadow: 0 2px 8px rgba(0,0,0,0.1); transition: transform 0.3s, box-shadow 0.3s;">
                        <div style="position: relative; height: 0; padding-bottom: 56.25%; background-color: #f0f0f0;">
                            <img src="images/edukasi7.PNG" alt="Night Routine" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; object-fit: cover;">
                            <div style="position: absolute; bottom: 5px; right: 5px; background-color: rgba(0,0,0,0.7); color: white; padding: 2px 5px; border-radius: 3px; font-size: 12px;">10:51</div>
                        </div>
                        <div style="padding: 12px;">
                            <div style="display: flex; gap: 10px;">
                                <div style="min-width: 36px; height: 36px; border-radius: 50%; background-color: #ddd; overflow: hidden;">
                                    <img src="images/pict7.PNG" alt="Channel" style="width: 100%; height: 100%; object-fit: cover;">
                                </div>
                                <div>
                                    <h5 style="margin: 0; font-size: 14px; font-weight: 600; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden; line-clamp: 2;">Tutorial makeup wisuda natural pakai product affordable murah untuk pemula</h5>
                                    <p style="margin: 4px 0 0; font-size: 12px; color: #606060;">Paohilda makeup artist</p>
                                    <p style="margin: 2px 0 0; font-size: 12px; color: #606060;">116 rb views • 1 tahun yang lalu</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </a>
            </div>
        </div>
    </div>

<script>
    // Search functionality
    document.getElementById('searchButton').addEventListener('click', performSearch);
    document.getElementById('searchInput').addEventListener('keyup', function(event) {
        if (event.key === 'Enter') {
            performSearch();
        }
    });

    function performSearch() {
        const searchTerm = document.getElementById('searchInput').value.toLowerCase();
        const videoCards = document.querySelectorAll('.video-card');
        
        videoCards.forEach(card => {
            const title = card.getAttribute('data-title').toLowerCase();
            const channel = card.getAttribute('data-channel').toLowerCase();
            
            if (title.includes(searchTerm) || channel.includes(searchTerm)) {
                card.style.display = 'block';
            } else {
                card.style.display = 'none';
            }
        });
    }
</script>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

    <!-- Inline JavaScript -->
    <script>
        document.getElementById('searchButton').addEventListener('mousedown', function(e) {
            e.preventDefault();
            this.style.backgroundColor = '#ffffff';
            this.style.color = '#495057';
            document.getElementById('searchInput').focus();
        });

        // Card hover effects
        const cards = document.querySelectorAll('.card-hover');
        cards.forEach(card => {
            card.addEventListener('mouseenter', function() {
                this.style.transform = 'translateY(-5px)';
                this.style.boxShadow = '0 6px 12px rgba(0,0,0,0.15)';
            });
            card.addEventListener('mouseleave', function() {
                this.style.transform = 'translateY(0)';
                this.style.boxShadow = '0 2px 8px rgba(0,0,0,0.1)';
            });
        });

        // Initialize and listen for resize
        window.addEventListener('load', adjustLayout);
        window.addEventListener('resize', adjustLayout);
        
            // Search functionality
        document.getElementById('searchButton').addEventListener('click', performSearch);
        document.getElementById('searchInput').addEventListener('input', performSearch);

    function performSearch() {
        const searchTerm = document.getElementById('searchInput').value.toLowerCase();
        const videoCards = document.querySelectorAll('.video-card');
        
        // If search term is empty, show all cards
        if (searchTerm.trim() === '') {
            videoCards.forEach(card => {
                card.style.display = 'block';
            });
            return;
        }
        
        // Otherwise filter cards
        videoCards.forEach(card => {
            const title = card.getAttribute('data-title').toLowerCase();
            const channel = card.getAttribute('data-channel').toLowerCase();
            
            if (title.includes(searchTerm) || channel.includes(searchTerm)) {
                card.style.display = 'block';
            } else {
                card.style.display = 'none';
            }
        });
    }

    // Function to set active link and show click effect
        function setActive(clickedLink) {
            // Remove active class from all links
            const navLinks = document.querySelectorAll('.nav-link');
            navLinks.forEach(link => {
                link.classList.remove('active');
                link.style.backgroundColor = 'transparent';
            });
            
            // Add active class to clicked link
            clickedLink.classList.add('active');
            
            // Show click effect (gray background)
            clickedLink.style.backgroundColor = 'rgba(0,0,0,0.1)';
            
            // Remove the effect after 300ms
            setTimeout(() => {
                if (!clickedLink.classList.contains('active')) {
                    clickedLink.style.backgroundColor = 'transparent';
                }
            }, 300);
        }

        // Set initial active link based on current page
        document.addEventListener('DOMContentLoaded', function() {
            const currentPage = window.location.pathname.split('/').pop() || 'index.html';
            const navLinks = document.querySelectorAll('.nav-link');
            
            navLinks.forEach(link => {
                if (link.getAttribute('href') === currentPage) {
                    link.classList.add('active');
                }
            });
        });
            // DOM Elements
            const openCameraBtn = document.getElementById('openCameraBtn');
            const cameraModal = document.getElementById('cameraModal');
            const closeCameraBtn = document.getElementById('closeCameraBtn');
            const backToMainBtn = document.getElementById('backToMainBtn');
            const videoElement = document.getElementById('videoElement');
            const captureBtn = document.getElementById('captureBtn');
            const fileInput = document.getElementById('fileInput');
            const resultContainer = document.getElementById('resultContainer');
            const resultImage = document.getElementById('resultImage');
            const analysisResult = document.getElementById('analysisResult');
            const analyzeAgainBtn = document.getElementById('analyzeAgainBtn');
            
            let stream = null;

            // Initialize on DOM loaded
            document.addEventListener('DOMContentLoaded', function() {
                // Initialize carousel
                var myCarousel = new bootstrap.Carousel(document.getElementById('mainCarousel'), {
                    interval: 5000,
                    wrap: true
                });
                
                // Set active nav link
                const currentPage = window.location.pathname.split('/').pop() || 'index.html';
                document.querySelectorAll('.nav-link').forEach(link => {
                    if (link.getAttribute('href') === currentPage) {
                        link.classList.add('active');
                    }
                });
            });

            // Event listeners
            openCameraBtn.addEventListener('click', openCameraModal);
            closeCameraBtn.addEventListener('click', closeCameraModal);
            backToMainBtn.addEventListener('click', closeCameraModal);
            captureBtn.addEventListener('click', captureImage);
            fileInput.addEventListener('change', handleFileUpload);
            analyzeAgainBtn.addEventListener('click', resetCamera);

            // Camera functions
            function openCameraModal() {
                cameraModal.style.display = 'flex';
                document.body.style.overflow = 'hidden'; // Prevent scrolling
                startCamera();
            }

            function closeCameraModal() {
                stopCamera();
                cameraModal.style.display = 'none';
                document.body.style.overflow = ''; // Re-enable scrolling
            }

            async function startCamera() {
                try {
                    stream = await navigator.mediaDevices.getUserMedia({ 
                        video: { 
                            facingMode: 'user',
                            width: { ideal: 640 },
                            height: { ideal: 480 }
                        } 
                    });
                    videoElement.srcObject = stream;
                    videoElement.style.display = 'block';
                    captureBtn.style.display = 'flex';
                    resultContainer.style.display = 'none';
                    fileInput.style.display = 'block';
                } catch (err) {
                    console.error("Error accessing camera:", err);
                    alert("Tidak dapat mengakses kamera. Silakan gunakan upload foto.");
                }
            }

            function stopCamera() {
                if (stream) {
                    stream.getTracks().forEach(track => track.stop());
                    videoElement.srcObject = null;
                }
            }

            function captureImage() {
                const canvas = document.createElement('canvas');
                canvas.width = videoElement.videoWidth;
                canvas.height = videoElement.videoHeight;
                canvas.getContext('2d').drawImage(videoElement, 0, 0, canvas.width, canvas.height);
                
                // Show loading state
                analysisResult.innerHTML = '<p>Menganalisis gambar...</p>';
                resultImage.src = canvas.toDataURL('image/jpeg');
                resultContainer.style.display = 'block';
                videoElement.style.display = 'none';
                captureBtn.style.display = 'none';
                fileInput.style.display = 'none';
                
                // Send image to server for analysis
                canvas.toBlob(async (blob) => {
                    const formData = new FormData();
                    formData.append('file', blob, 'capture.jpg');
                    
                    try {
                        const response = await fetch('/upload_analyze', {
                            method: 'POST',
                            body: formData
                        });
                        
                        const data = await response.json();
                        
                        if (response.ok) {
                            displayAnalysisResults(data);
                        } else {
                            throw new Error(data.error || 'Analysis failed');
                        }
                    } catch (error) {
                        console.error('Analysis error:', error);
                        analysisResult.innerHTML = `<p class="text-danger">Error: ${error.message}</p>`;
                    }
                }, 'image/jpeg', 0.9);
            }

            function handleFileUpload(e) {
                if (e.target.files && e.target.files[0]) {
                    const file = e.target.files[0];
                    
                    // Show loading state
                    analysisResult.innerHTML = '<p>Menganalisis gambar...</p>';
                    resultContainer.style.display = 'block';
                    videoElement.style.display = 'none';
                    captureBtn.style.display = 'none';
                    fileInput.style.display = 'none';
                    
                    const reader = new FileReader();
                    reader.onload = (event) => {
                        resultImage.src = event.target.result;
                        
                        // Send file to server
                        const formData = new FormData();
                        formData.append('file', file);
                        
                        fetch('/upload_analyze', {
                            method: 'POST',
                            body: formData
                        })
                        .then(response => response.json())
                        .then(data => {
                            if (data.error) throw new Error(data.error);
                            displayAnalysisResults(data);
                        })
                        .catch(error => {
                            console.error('Analysis error:', error);
                            analysisResult.innerHTML = `<p class="text-danger">Error: ${error.message}</p>`;
                        });
                    };
                    reader.readAsDataURL(file);
                }
            }

            function displayAnalysisResults(data) {
                let html = `
                    <div class="analysis-result">
                        <h4>Hasil Analisis</h4>
                        <div class="condition-info mb-3">
                            <h5>Kondisi: ${data.condition.replace(/_/g, ' ').toUpperCase()}</h5>
                            <p>Akurasi: ${(data.confidence * 100).toFixed(1)}%</p>
                        </div>
                        <div class="recommendations">
                            <h5>Rekomendasi Perawatan:</h5>
                            <ul class="list-group list-group-flush">
                                <li class="list-group-item"><strong>Pembersih:</strong> ${data.recommendations.cleanser}</li>
                                <li class="list-group-item"><strong>Toner:</strong> ${data.recommendations.toner}</li>
                                <li class="list-group-item"><strong>Pelembab:</strong> ${data.recommendations.moisturizer}</li>
                                <li class="list-group-item"><strong>Tabir Surya:</strong> ${data.recommendations.sunscreen}</li>
                                <li class="list-group-item"><strong>Perawatan:</strong> ${data.recommendations.treatment}</li>
                                <li class="list-group-item"><strong>Hindari:</strong> ${data.recommendations.avoid}</li>
                            </ul>
                        </div>
                    </div>
                `;
                
                analysisResult.innerHTML = html;
            }

            function resetCamera() {
                resultContainer.style.display = 'none';
                startCamera();
            }

            // Handle window resize
            window.addEventListener('resize', function() {
                if (cameraModal.style.display === 'flex') {
                    if (window.innerWidth <= 768) {
                        backToMainBtn.style.display = 'block';
                        closeCameraBtn.style.display = 'none';
                    } else {
                        backToMainBtn.style.display = 'none';
                        closeCameraBtn.style.display = 'block';
                    }
                }
            });
    </script>
</body>
</html>